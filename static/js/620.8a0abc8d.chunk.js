"use strict";(self.webpackChunkemail_hub_front=self.webpackChunkemail_hub_front||[]).push([[620],{19620:function(n,t,e){e.r(t),e.d(t,{default:function(){return he}});var i,o,r,a,l,c,s,u,d,x,h,p,f,v,m,b,g,Z,j,k,y,w,C,M,_,S,P,N,I,E,A,z,B,L,Y,U,F,O,T,H,G,X,D,R,V,W,$,K,Q,q,J,nn,tn,en,on,rn,an,ln,cn,sn,un,dn,xn,hn,pn,fn,vn,mn,bn,gn,Zn,jn,kn=e(74165),yn=e(15861),wn=e(93433),Cn=e(1413),Mn=e(29439),_n=e(47202),Sn=e(72791),Pn=e(30168),Nn=e(50225),In=e(39126),En=e(56355),An=e(84373),zn=e(40071),Bn=e(16856),Ln=e(17425),Yn=Nn.Z.div(i||(i=(0,Pn.Z)(["\n  color: var(--title-text-main-color);\n  background: var(--main-background-color);\n  width: 100%;\n  height: 39px;\n  padding: 3px;\n  margin-bottom: 3px;\n  font-size: 1rem;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 10px;\n"]))),Un=(0,Nn.Z)(zn.Xmp)(o||(o=(0,Pn.Z)(["\n  color: currentColor;\n  width: 20px;\n  height: 20px;\n  opacity: ",";\n"])),(function(n){return"true"===n.page?"1.0":"0.5"})),Fn=(0,Nn.Z)(zn.ec7)(r||(r=(0,Pn.Z)(["\n  color: currentColor;\n  width: 20px;\n  height: 20px;\n  opacity: ",";\n"])),(function(n){return"true"===n.page?"0.5":"1"})),On=Nn.Z.span(a||(a=(0,Pn.Z)(["\n  color: currentColor;\n  font-family: inherit;\n  font-weight: 400;\n  font-size: 12px;\n  line-height: 1.33;\n"]))),Tn=Nn.Z.form(l||(l=(0,Pn.Z)(["\n  position: absolute;\n  display: flex;\n  left: 56%;\n  align-items: center;\n  justify-content: start;\n  gap: 10px;\n  width: 200px;\n  height: 100%;\n"]))),Hn=Nn.Z.input(c||(c=(0,Pn.Z)(["\n  position: absolute;\n  background-color: var(--main-background-color);\n  border-color: var(--btn-border-color);\n  color: currentColor;\n  font-family: inherit;\n  font-weight: 400;\n  font-size: 14px;\n  line-height: 1.33;\n  outline: none;\n  height: 30px;\n  padding-left: 5px;\n  &.inactive-input {\n    width: 30px;\n    height: 30px;\n    left: 0;\n    border-radius: 50%;\n    transition: all 0.3s ease-in-out;\n    padding-right: 0;\n  }\n  &.active-input {\n    padding-right: 50px;\n    background-color: var(--auth-background-color);\n    width: 400px;\n    left: -100px;\n    transition: all 0.3s ease-in-out;\n    border-radius: 10px;\n  }\n"]))),Gn=(0,Nn.Z)(zn.ZU_)(s||(s=(0,Pn.Z)(["\n  width: 30px;\n  height: 30px;\n  ","\n"])),(function(n){return n.uid?"display:block":"display:none"})),Xn=(0,Nn.Z)(Bn.B4e)(u||(u=(0,Pn.Z)(["\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  color: currentColor;\n  width: 20px;\n  height: 20px;\n  z-index: 1;\n  &.inactive-icon {\n    left: 5px;\n    opacity: 0;\n    transition: all 0.3s ease-in-out;\n  }\n  &.active-icon {\n    left: 275px;\n    opacity: 1;\n    transition: all 0.3s ease-in-out;\n  }\n"]))),Dn=(0,Nn.Z)(zn.eaK)(d||(d=(0,Pn.Z)(["\n  position: absolute;\n  top: 50%;\n\n  transform: translateY(-9px);\n  color: currentColor;\n  width: 20px;\n  height: 20px;\n  z-index: 2;\n\n  &.inactive-icon {\n    left: 5px;\n    transition: all 0.3s ease-in-out;\n  }\n  &.active-icon {\n    left: 250px;\n    transition: all 0.3s ease-in-out;\n  }\n"]))),Rn=Nn.Z.div(x||(x=(0,Pn.Z)(["\n  position: relative;\n  padding-left: ",";\n  display: flex;\n  align-items: center;\n  justify-content: start;\n  gap: 10px;\n"])),(function(n){return"false"===n.prv?"50px":"5px"})),Vn=(0,Nn.Z)(zn.q9I)(h||(h=(0,Pn.Z)(["\n  color: currentColor;\n  width: 28px;\n  height: 28px;\n"]))),Wn=(0,Nn.Z)(zn.L_o)(p||(p=(0,Pn.Z)(["\n  display: ",";\n  color: currentColor;\n  width: 24px;\n  height: 24px;\n"])),(function(n){return 0===n.chekout?"none":"block"})),$n=(0,Nn.Z)(En.uOc)(f||(f=(0,Pn.Z)(["\n  display: ",";\n  color: currentColor;\n  width: 24px;\n  height: 24px;\n"])),(function(n){return 0===n.chekout?"none":"block"})),Kn=(0,Nn.Z)(zn.SVC)(v||(v=(0,Pn.Z)(["\n  display: ",";\n  color: currentColor;\n  width: 26px;\n  height: 26px;\n"])),(function(n){return 0===n.chekout?"none":"block"})),Qn=(0,Nn.Z)(An.dez)(m||(m=(0,Pn.Z)(["\n  display: ",";\n  color: currentColor;\n  width: 26px;\n  height: 26px;\n"])),(function(n){return 0===n.chekout?"none":"block"})),qn=(0,Nn.Z)(Bn.oDQ)(b||(b=(0,Pn.Z)(["\n  color: currentColor;\n  width: 24px;\n  height: 24px;\n"]))),Jn=(0,Nn.Z)(Ln.r22)(g||(g=(0,Pn.Z)(["\n  display: ",";\n  color: currentColor;\n  width: 26px;\n  height: 26px;\n"])),(function(n){return 0===n.chekout?"none":"block"})),nt=(0,Nn.Z)(In.ukf)(Z||(Z=(0,Pn.Z)(["\n  display: ",";\n  color: currentColor;\n  width: 24px;\n  height: 24px;\n"])),(function(n){return 0===n.chekout?"none":"block"})),tt=Nn.Z.div(j||(j=(0,Pn.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: start;\n  gap: 15px;\n"]))),et=e(57689),it=e(11087),ot=e(95048),rt=e(27628),at=e(91404),lt=e(92263),ct=e(89995),st=e(38142),ut=e(80184),dt=function(n){var t=n.box,e=n.path,i=n.itemPerPage,o=n.setMailArray,r=n.mailArray,a=n.setCheckedMailArray,l=n.checkedMailArray,c=n.setAccentBox,s=n.accentBox,u=n.handleMove,d=n.handleFlags,x=n.handleDelete,h=(0,et.TH)(),p=(0,et.s0)(),f=(0,ot.I0)(),v=(0,ot.v9)(at.as),m=(0,ot.v9)(at.pW),b=(0,et.UO)(),g=b.uid,Z=b._id,j=(0,rt.nP)(),k=(0,Mn.Z)(j,1)[0],y=(0,Sn.useState)(!1),w=(0,Mn.Z)(y,2),C=w[0],M=w[1],_=(0,it.lr)(),S=(0,Mn.Z)(_,2),P=S[0],N=S[1],I=Number(P.get("page")),E=P.get("search"),A=(0,Sn.useState)(null===t||void 0===t?void 0:t.countMail),z=(0,Mn.Z)(A,2),B=z[0],L=z[1],Y=(0,Sn.useState)(E||""),U=(0,Mn.Z)(Y,2),F=U[0],O=U[1],T=(0,Sn.useState)(!1),H=(0,Mn.Z)(T,2),G=H[0],X=H[1],D=(0,rt.S5)({_id:Z,path:e,search:E},{skip:!E||g}).data;(0,Sn.useEffect)((function(){t&&L(null===t||void 0===t?void 0:t.countMail)}),[t]);(0,Sn.useEffect)((function(){var n=P.get("search");n&&"null"!==n&&(console.log("obj :>> ",n),O(n))}),[P]),(0,Sn.useEffect)((function(){e&&L(null===t||void 0===t?void 0:t.countMail)}),[e]),(0,Sn.useEffect)((function(){E||o(null===t||void 0===t?void 0:t.mailList)}),[D,E]),(0,Sn.useEffect)((function(){var n,t;D&&(o(null===D||void 0===D||null===(n=D.searchResults)||void 0===n?void 0:n.listEmail),L(null===D||void 0===D||null===(t=D.searchResults)||void 0===t?void 0:t.listEmail.length))}),[D]);var R=function(){var n=(0,yn.Z)((0,kn.Z)().mark((function n(){var t,i,o,a;return(0,kn.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,k({_id:Z,path:e,page:I,uid:null===(t=r[0])||void 0===t?void 0:t.id});case 2:(null===(a=n.sent)||void 0===a||null===(i=a.data)||void 0===i||null===(o=i.listEmail)||void 0===o?void 0:o.length)>1&&c((function(n){var t,i,o,l,c=n.mailboxes.findIndex((function(n){return n.path===e})),s=(0,wn.Z)(n.mailboxes);return s[c]=(0,Cn.Z)((0,Cn.Z)({},s[c]),{},{mailList:[].concat((0,wn.Z)(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.listEmail.slice(0,(null===a||void 0===a||null===(i=a.data)||void 0===i?void 0:i.listEmail.length)-1)),(0,wn.Z)(r)),countMail:null===a||void 0===a||null===(o=a.data)||void 0===o?void 0:o.countMail,countMailUnseen:null===a||void 0===a||null===(l=a.data)||void 0===l?void 0:l.countMailUnseen}),f((0,st.k1)(v.map((function(t){return t._id===n._id?(0,Cn.Z)((0,Cn.Z)({},n),{},{mailboxes:s}):t})))),(0,Cn.Z)((0,Cn.Z)({},n),{},{mailboxes:s})}));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,ut.jsxs)(Yn,{children:[(0,ut.jsxs)(Rn,{prv:(!Z).toString(),children:[Z?(0,ut.jsxs)(ut.Fragment,{children:[(0,ut.jsx)(ct.Vi,{type:"checkbox",id:"aa",onChange:function(n){return function(n){var t=n.target.checked;a(t?r.filter((function(n){var t,e;return n.id>=(r.length-1<I*i-1?null===(t=r[r.length-1])||void 0===t?void 0:t.id:null===(e=r[I*i-1])||void 0===e?void 0:e.id)})):[])}(n)}}),(0,ut.jsx)(ct.IV,{htmlFor:"aa",className:"MailCheck panel",children:(0,ut.jsx)(ct.NO,{className:"IconCheck"})})]}):null,g?(0,ut.jsx)(Gn,{uid:g,onClick:function(){var n,t,i,o;E?p(null!==(i=null===(o=h.state)||void 0===o?void 0:o.from)&&void 0!==i?i:"mailbox/".concat(m,"?boxPath=").concat(e,"&page=1&search=").concat(E),{state:{from:h}}):p(null!==(n=null===(t=h.state)||void 0===t?void 0:t.from)&&void 0!==n?n:"mailbox/".concat(m,"?boxPath=").concat(e,"&page=1"),{state:{from:h}})}}):(0,ut.jsx)(Vn,{onClick:R}),["Junk","[Gmail]/\u0421\u043f\u0430\u043c"].includes(e)?(0,ut.jsx)(nt,{chekout:l.length,onClick:function(){u(e,"INBOX")}}):(0,ut.jsx)(Jn,{chekout:l.length,onClick:function(){var n;u(e,null===s||void 0===s||null===(n=s.mailboxes[null===s||void 0===s?void 0:s.mailboxes.findIndex((function(n){return"Junk"===n.nameEn}))])||void 0===n?void 0:n.path)}}),(0,ut.jsx)(Wn,{chekout:l.length,onClick:function(){var n;["Trash","[Gmail]/\u041a\u043e\u0448\u0438\u043a"].includes(e)?x(e):u(e,null===s||void 0===s||null===(n=s.mailboxes[null===s||void 0===s?void 0:s.mailboxes.findIndex((function(n){return"Trash"===n.nameEn}))])||void 0===n?void 0:n.path)}}),!["Trash","[Gmail]/\u041a\u043e\u0448\u0438\u043a"].includes(e)&&(0,ut.jsx)($n,{chekout:l.length,onClick:function(){u(e,"INBOX")}}),(0,ut.jsx)(Kn,{chekout:l.length,onClick:function(){d(!1)}}),(0,ut.jsx)(Qn,{chekout:l.length,onClick:function(){d(!0)}}),(0,ut.jsx)(qn,{onClick:function(){X(!0),document.body.style.overflow="hidden"}})]}),(0,ut.jsxs)(Tn,{onSubmit:function(n){if(n.preventDefault(),g){var t;if(F)if(p("mailbox/".concat(m,"?boxPath=").concat(e,"&page=1&search=").concat(F),{state:{from:h}}),(null===D||void 0===D?void 0:D.search)===F)o(null===D||void 0===D||null===(t=D.searchResults)||void 0===t?void 0:t.listEmail)}else{var i,r=Object.fromEntries(P.entries());if(F?(r.search=F,N(r)):delete r.search,(null===D||void 0===D?void 0:D.search)===F)o(null===D||void 0===D||null===(i=D.searchResults)||void 0===i?void 0:i.listEmail)}},children:[(0,ut.jsx)(Dn,{className:C?"active-icon":"inactive-icon",values:F,onClick:function(){if(C){var n,t=Object.fromEntries(P.entries());if(F?(t.search=F,N(t)):delete t.search,(null===D||void 0===D?void 0:D.search)===F)o(null===D||void 0===D||null===(n=D.searchResults)||void 0===n?void 0:n.listEmail)}else M(!0)}}),(0,ut.jsx)(Xn,{className:C?"active-icon":"inactive-icon",onClick:function(){M(!1);var n=Object.fromEntries(P.entries());delete n.search,N(n),O(""),o(null===t||void 0===t?void 0:t.mailList)}}),(0,ut.jsx)(Hn,{value:F,onChange:function(n){var t=n.target.value;O(t)},className:C?"active-input":"inactive-input"})]}),(0,ut.jsxs)(tt,{children:[(0,ut.jsxs)(On,{children:[g?E?r.findIndex((function(n){return n.id===Number(g)}))+1:B-Number(g)+1:"".concat((I-1)*i+1," - \n          ").concat(I*i>B?B:I*i)," \u0437 ",B]}),(0,ut.jsx)(Un,{page:g?((E?r.findIndex((function(n){return n.id===Number(g)})):Number(g))<B).toString():(I>1).toString(),onClick:function(){if(g){if(!E&&Number(g)>=B)return;if(E&&0===r.findIndex((function(n){return n.id===Number(g)})))return;p(E?"mail/".concat(r[r.findIndex((function(n){return n.id===Number(g)}))-1].id,"?boxPath=").concat(e,"&page=").concat(Math.ceil((r.findIndex((function(n){return n.id===Number(g)}))+1)/50),"&search=").concat(E):"mail/".concat(Number(g)+1,"?boxPath=").concat(e,"&page=").concat(Math.ceil((B-Number(g))/50)))}else{if(I<=1)return;N((function(n){return n.set("page",Number(I)-1),n}))}}}),(0,ut.jsx)(Fn,{page:(g?(Number(g)<=1).toString():(I-1)*i<B&&I*i>=B).toString(),onClick:function(){if(g){if(Number(g)<=1)return;if(E&&r.findIndex((function(n){return n.id===Number(g)}))===r.length-1)return;p(E?"mail/".concat(r[r.findIndex((function(n){return n.id===Number(g)}))+1].id,"?boxPath=").concat(e,"&page=").concat(Math.ceil((r.findIndex((function(n){return n.id===Number(g)}))+1)/50),"&search=").concat(E):"mail/".concat(Number(g)-1,"?boxPath=").concat(e,"&page=").concat(Math.ceil((B-Number(g)+2)/50)))}else{if((I-1)*i<B&&I*i>=B)return;N((function(n){return n.set("page",I+1),n}))}}})]}),G&&(0,ut.jsx)(lt.Z,{onClose:function(){X(!1),document.body.style.overflow="auto"}})]})},xt=e(39230),ht=e(60978),pt=e(78820),ft=(Nn.Z.div(k||(k=(0,Pn.Z)(["\n  height: 100%;\n  min-width: 100%;\n  position: relative;\n"]))),Nn.Z.div(y||(y=(0,Pn.Z)(["\n  padding: 0 32px;\n  height: 100%;\n  min-width: 100%;\n  box-sizing: border-box;\n  border-radius: 10px;\n\n  position: relative;\n  padding: 0 20px 40px;\n\n  @media screen and (min-width: 768px) {\n    padding: 0 32px 40px;\n  }\n\n  @media screen and (min-width: 1440px) {\n    padding: 0 32px 32px;\n  }\n"]))),Nn.Z.div(w||(w=(0,Pn.Z)(["\n  height: 120px;\n  width: 100%;\n  background: var(--main-background-color);\n  border-radius: 10px;\n  border: 1px solid var(--btn-border-color);\n  position: relative;\n"])))),vt=Nn.Z.ul(C||(C=(0,Pn.Z)(["\n  display: flex;\n  gap: 15px;\n  padding: 20px;\n  height: 100%;\n"]))),mt=(0,Nn.Z)(Bn.mz3)(M||(M=(0,Pn.Z)(["\n  position: absolute;\n  right: 25px;\n  top: 1px;\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n  color: currentColor;\n  opacity: 0;\n  transition: all 500ms cubic-bezier(0.4, 0, 0.2, 1);\n"]))),bt=(0,Nn.Z)(Bn.FH3)(_||(_=(0,Pn.Z)(["\n  position: absolute;\n  right: 0;\n  top: 0px;\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n  color: currentColor;\n  transition: all 500ms cubic-bezier(0.4, 0, 0.2, 1);\n  opacity: 0;\n"]))),gt=Nn.Z.li(S||(S=(0,Pn.Z)(["\n  color: ",";\n  width: 177px;\n  height: 100%;\n  ","\n  border: 3px solid ",";\n  border-radius: 10px;\n  position: relative;\n  transition: all 250ms cubic-bezier(0.4, 0, 0.2, 1);\n  &:last-child {\n    width: 77px;\n  }\n  &:hover {\n    border: 3px solid\n      ",";\n    box-shadow: 0 0 10px ",";\n    opacity: 1;\n    .show {\n      opacity: 0.7;\n      &:hover {\n        opacity: 1;\n      }\n    }\n  }\n"])),(function(n){return n.color}),(function(n){return n.border?"opacity:1;":"opacity:0.6;"}),(function(n){return n.border?n.color:"var(--btn-border-color)"}),(function(n){return n.color?n.color:"var(--btn-border-color)"}),(function(n){return n.color})),Zt=Nn.Z.div(P||(P=(0,Pn.Z)(["\n  display: flex;\n  gap: 5px;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n  padding: 5px;\n"]))),jt=Nn.Z.button(N||(N=(0,Pn.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n  background: none;\n  border: none;\n  cursor: pointer;\n"]))),kt=(0,Nn.Z)(pt.Sf5)(I||(I=(0,Pn.Z)(["\n  width: 100%;\n  height: 100%;\n  color: var(--feedback-form-text);\n"]))),yt=(Nn.Z.div(E||(E=(0,Pn.Z)(["\n  width: 100%;\n  height: 100%;\n  color: var(--feedback-form-text);\n"]))),(0,Nn.Z)(ht.Gpr)(A||(A=(0,Pn.Z)(["\n  width: 60%;\n  height: 60%;\n"])))),wt=(0,Nn.Z)(ht.FOe)(z||(z=(0,Pn.Z)(["\n  width: 60%;\n  height: 60%;\n"]))),Ct=(0,Nn.Z)(ht.eCk)(B||(B=(0,Pn.Z)(["\n  width: 60%;\n  height: 60%;\n"]))),Mt=(0,Nn.Z)(ht.E3w)(L||(L=(0,Pn.Z)(["\n  width: 60%;\n  height: 60%;\n"]))),_t=(0,Nn.Z)(ht.ZHo)(Y||(Y=(0,Pn.Z)(["\n  width: 60%;\n  height: 60%;\n"]))),St=(0,Nn.Z)(ht.UAv)(U||(U=(0,Pn.Z)(["\n  width: 60%;\n  height: 60%;\n"]))),Pt=(0,Nn.Z)(ht.cgW)(F||(F=(0,Pn.Z)(["\n  width: 60%;\n  height: 60%;\n"]))),Nt=Nn.Z.p(O||(O=(0,Pn.Z)(["\n  font-family: inherit;\n  font-size: 14px;\n  font-weight: 600;\n  color: currentColor;\n  margin: 0 auto;\n"]))),It=((0,Nn.Z)(In.nzA)(T||(T=(0,Pn.Z)(["\n  position: absolute;\n  left: 1px;\n  top: 12px;\n  transform: translateY(-50%);\n  width: 20px;\n  height: 20px;\n  color: red;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  border-top-left-radius: 50%;\n  border-top-right-radius: 50%;\n  border-bottom-left-radius: 10%;\n  border-bottom-right-radius: 10%;\n"]))),Nn.Z.button(H||(H=(0,Pn.Z)(["\n  position: absolute;\n  left: -12px;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 28px;\n  height: 28px;\n  color: #fff;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: red;\n  border-radius: 50%;\n"])))),Et=Nn.Z.button(G||(G=(0,Pn.Z)(["\n  position: absolute;\n  right: -12px;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 28px;\n  height: 28px;\n  color: #fff;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: red;\n  border-radius: 50%;\n"]))),At=e(47796),zt=((0,Nn.Z)(An.Y3S)(X||(X=(0,Pn.Z)(["\n  width: 20px;\n  height: 20px;\n  cursor: pointer;\n  transition: all 250ms cubic-bezier(0.4, 0, 0.2, 1);\n  &:hover {\n    transform: scale(1.1);\n    color: var(--accent);\n  }\n"]))),(0,Nn.Z)(ht.Gpr)(D||(D=(0,Pn.Z)(["\n  width: 20px;\n  height: 20px;\n"])))),Bt=(0,Nn.Z)(ht.FOe)(R||(R=(0,Pn.Z)(["\n  width: 20px;\n  height: 20px;\n"]))),Lt=(0,Nn.Z)(ht.eCk)(V||(V=(0,Pn.Z)(["\n  width: 20px;\n  height: 20px;\n"]))),Yt=(0,Nn.Z)(ht.E3w)(W||(W=(0,Pn.Z)(["\n  width: 20px;\n  height: 20px;\n"]))),Ut=(0,Nn.Z)(ht.ZHo)($||($=(0,Pn.Z)(["\n  width: 20px;\n  height: 20px;\n"]))),Ft=(0,Nn.Z)(ht.UAv)(K||(K=(0,Pn.Z)(["\n  width: 20px;\n  height: 20px;\n"]))),Ot=(0,Nn.Z)(ht.cgW)(Q||(Q=(0,Pn.Z)(["\n  width: 20px;\n  height: 20px;\n"]))),Tt=Nn.Z.div(q||(q=(0,Pn.Z)(["\n  position: relative;\n  width: 450px;\n  margin: 0 auto;\n"]))),Ht=Nn.Z.h2(J||(J=(0,Pn.Z)(["\n  font-size: 1.5rem;\n  font-family: inherit;\n  font-weight: 600;\n  line-height: 1.33;\n  text-align: center;\n  color: var(--title-text-main-color);\n"]))),Gt=Nn.Z.div(nn||(nn=(0,Pn.Z)(["\n  margin-bottom: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),Xt=Nn.Z.div(tn||(tn=(0,Pn.Z)(["\n  margin-bottom: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 20px;\n  gap: 10px;\n"]))),Dt=Nn.Z.label(en||(en=(0,Pn.Z)(["\n  width: 180px;\n  font-size: 1rem;\n  color: var(--title-text-main-color);\n"]))),Rt=Nn.Z.input(on||(on=(0,Pn.Z)(["\n  width: 60%;\n  padding: 10px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  font-size: 1rem;\n  outline: none;\n"]))),Vt=(Nn.Z.input(rn||(rn=(0,Pn.Z)(["\n  width: 10%;\n\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  font-size: 1rem;\n"]))),Nn.Z.select(an||(an=(0,Pn.Z)(["\n  width: 60%;\n  padding: 10px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  font-size: 1rem;\n"]))),Nn.Z.div(ln||(ln=(0,Pn.Z)(["\n  margin-top: 18px;\n  display: flex;\n  justify-content: space-around;\n"])))),Wt=Nn.Z.h3(cn||(cn=(0,Pn.Z)(["\n  font-size: 1.1rem;\n  font-family: inherit;\n  font-weight: 600;\n  line-height: 1.33;\n  text-align: center;\n  margin-bottom: 16px;\n  margin-bottom: 20px;\n  color: var(--title-text-main-color);\n"]))),$t=Nn.Z.button(sn||(sn=(0,Pn.Z)(["\n  padding: 10px 20px;\n  border: none;\n  border-radius: 10px;\n  font-family: inherit;\n  font-weight: 400;\n  font-size: 12px;\n  line-height: 1.33;\n  cursor: pointer;\n  background-color: var(--accent-background-color);\n  color: var(--btn-text-color);\n  transition: background-color 0.3s;\n  :hover {\n    background: var(--active-btn-color);\n    box-shadow: 4px 2px 16px 0px rgba(136, 165, 191, 0.48);\n  }\n\n  @media screen and (min-width: 375px) {\n    margin-right: 18px;\n  }\n\n  @media screen and (min-width: 768px) {\n    padding: 12px 32px;\n    font-size: 14px;\n    line-height: 1.28;\n    margin-right: 24px;\n  }\n"]))),Kt=Nn.Z.input(un||(un=(0,Pn.Z)(["\n  accent-color: var(--accent-background-color);\n  margin-right: 8px;\n  width: 20px;\n  height: 20px;\n"]))),Qt=Nn.Z.div(dn||(dn=(0,Pn.Z)(["\n  position: relative;\n  width: 60%;\n"]))),qt=Nn.Z.span(xn||(xn=(0,Pn.Z)(["\n  position: absolute;\n  right: 10px;\n"]))),Jt=Nn.Z.div(hn||(hn=(0,Pn.Z)(["\n  color: ",";\n  background: #fff;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  padding: 10px;\n  font-size: 1rem;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: start;\n  gap: 10px;\n"])),(function(n){return n.color})),ne=Nn.Z.div(pn||(pn=(0,Pn.Z)(["\n  display: ",";\n  position: absolute;\n  width: 100%;\n\n  z-index: 1;\n  top: 100%;\n  left: 0;\n  background: #fff;\n  border: 1px solid #ccc;\n  border-top: none;\n  border-radius: 0 0 4px 4px;\n  scroll: auto;\n  overflow: hidden;\n"])),(function(n){return n.isOpen?"block":"none"})),te=Nn.Z.div(fn||(fn=(0,Pn.Z)(["\n  color: ",";\n  padding: 10px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: start;\n  gap: 10px;\n  &:hover {\n    background: #f2f2f2;\n  }\n"])),(function(n){return n.color})),ee=function(n){var t,e,i=n.options,o=n.selectedValue,r=n.onChange,a=n.color,l=(0,Sn.useState)(!1),c=(0,Mn.Z)(l,2),s=c[0],u=c[1],d=(0,Sn.useRef)(null),x=function(){u(!s)},h=function(n){d.current&&!d.current.contains(n.target)&&u(!1)};return(0,Sn.useEffect)((function(){return s?document.addEventListener("click",h):document.removeEventListener("click",h),function(){document.removeEventListener("click",h)}}),[s]),(0,ut.jsxs)(Qt,{ref:d,children:[(0,ut.jsxs)(Jt,{color:a,onClick:x,children:[null===(t=i.find((function(n){return n.value===o})))||void 0===t?void 0:t.icon,null===(e=i.find((function(n){return n.value===o})))||void 0===e?void 0:e.label,(0,ut.jsx)(qt,{className:"arrow ".concat(s?"open":""),children:"\u25bc"})]}),(0,ut.jsx)(ne,{isOpen:s,children:i.map((function(n){return(0,ut.jsxs)(te,{color:a,onClick:function(){return t=n.value,r(t),void x();var t},children:[n.icon," ",n.label]},n.value)}))})]})},ie=e(94269),oe=(Nn.Z.div(vn||(vn=(0,Pn.Z)(["\n  position: relative;\n  width: 60%;\n"]))),Nn.Z.span(mn||(mn=(0,Pn.Z)(["\n  position: absolute;\n  right: 10px;\n"]))),Nn.Z.div(bn||(bn=(0,Pn.Z)(["\n  background: #fff;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  padding: 10px;\n  font-size: 1rem;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: start;\n  gap: 10px;\n"]))),Nn.Z.div(gn||(gn=(0,Pn.Z)(["\n  display: ",";\n  position: absolute;\n  width: 100%;\n\n  z-index: 1;\n  top: 100%;\n  left: 0;\n  background: #fff;\n  border: 1px solid #ccc;\n  border-top: none;\n  border-radius: 0 0 4px 4px;\n  scroll: auto;\n  overflow: hidden;\n"])),(function(n){return n.isOpen?"block":"none"})),Nn.Z.div(Zn||(Zn=(0,Pn.Z)(["\n  padding: 10px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: start;\n  gap: 10px;\n  &:hover {\n    background: #f2f2f2;\n  }\n"]))),Nn.Z.div(jn||(jn=(0,Pn.Z)(["\n  position: absolute;\n  z-index: 2;\n  width: 260px;\n  height: 90px;\n  background: var(--main-background-color);\n  box-shadow: 2px 2px 16px 0px rgba(136, 165, 191, 0.48);\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  padding: 10px;\n"])))),re=function(n){var t=n.color,e=n.onChange,i=(0,Sn.useState)(!1),o=(0,Mn.Z)(i,2),r=o[0],a=o[1];return(0,ut.jsxs)("div",{children:[(0,ut.jsx)("div",{style:{background:t,width:"25px",height:"25px",borderRadius:"50%",cursor:"pointer"},onClick:function(){return a(!r)}}),r?(0,ut.jsxs)(oe,{children:[(0,ut.jsx)("div",{onClick:function(){return a(!1)},style:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}}),(0,ut.jsx)(ie.iY,{colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#00bcd4","#009688","#4caf50","#8bc34a","#ff9800","#ff5722"],color:t,width:"260px",onChange:function(n){e(n.hex)}})]}):null]})},ae=e(60095),le=e(64767),ce=e(34945),se=function(n){var t=n.onClose,e=n.initialSettings,i=n.setMailBoxArray,o=n.setAccentBox,r=(0,xt.$G)().t,a=(0,ot.v9)(at.as),l=(0,et.UO)()._id,c=(0,et.s0)(),s=(0,Sn.useState)((null===e||void 0===e?void 0:e.color)||"#007bff"),u=(0,Mn.Z)(s,2),d=u[0],x=u[1],h=(0,Sn.useState)((null===e||void 0===e?void 0:e.iconBox)||"mailbox-icon-7"),p=(0,Mn.Z)(h,2),f=p[0],v=p[1],m=(0,et.TH)();console.log("initialSettings :>> ",e);var b=(0,ot.I0)(),g=(0,Sn.useState)((null===e||void 0===e?void 0:e.host)||"imap.gmail.com"),Z=(0,Mn.Z)(g,2),j=Z[0],k=Z[1],y=(0,Sn.useState)((null===e||void 0===e?void 0:e.port)||"993"),w=(0,Mn.Z)(y,2),C=w[0],M=w[1],_=(0,Sn.useState)((null===e||void 0===e?void 0:e.email)||""),S=(0,Mn.Z)(_,2),P=S[0],N=S[1],I=(0,Sn.useState)(""),E=(0,Mn.Z)(I,2),A=E[0],z=E[1],B=(0,Sn.useState)((null===e||void 0===e?void 0:e.secure)&&!0),L=(0,Mn.Z)(B,2),Y=L[0],U=L[1],F=(0,Sn.useState)((null===e||void 0===e?void 0:e.smtpSecure)&&!0),O=(0,Mn.Z)(F,2),T=O[0],H=O[1],G=(0,Sn.useState)((null===e||void 0===e?void 0:e.smtpHost)||"smtp.gmail.com"),X=(0,Mn.Z)(G,2),D=X[0],R=X[1],V=(0,Sn.useState)((null===e||void 0===e?void 0:e.smtpPort)||"587"),W=(0,Mn.Z)(V,2),$=W[0],K=W[1],Q=(0,Sn.useState)(!1),q=(0,Mn.Z)(Q,2),J=q[0],nn=q[1],tn=(0,Sn.useState)("\u041f\u043e\u0447\u0430\u0442\u043a\u043e\u0432\u0435 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0434\u0430\u043d\u0438\u0445"),en=(0,Mn.Z)(tn,2),on=en[0],rn=en[1],an=(0,rt.Vs)(),ln=(0,Mn.Z)(an,1)[0],cn=(0,rt.G_)(),sn=(0,Mn.Z)(cn,1)[0],un=[{value:"mailbox-icon-1",label:"Gmail",icon:(0,ut.jsx)(Bt,{})},{value:"mailbox-icon-2",label:"Yahoo",icon:(0,ut.jsx)(zt,{})},{value:"mailbox-icon-3",label:"Outlook",icon:(0,ut.jsx)(Lt,{})},{value:"mailbox-icon-4",label:"Apple",icon:(0,ut.jsx)(Yt,{})},{value:"mailbox-icon-5",label:"Proton",icon:(0,ut.jsx)(Ut,{})},{value:"mailbox-icon-6",label:"Zoho",icon:(0,ut.jsx)(Ft,{})},{value:"mailbox-icon-7",label:"Mail",icon:(0,ut.jsx)(Ot,{})}],dn=function(){var n=(0,yn.Z)((0,kn.Z)().mark((function n(){var s,u,x,h,p,v,g,Z,k,y,w,M;return(0,kn.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s={iconBox:f,color:d,host:j,port:Number(C),email:P,pass:A,secure:Y,smtpSecure:T,smtpHost:D,smtpPort:Number($)},nn(!0),n.prev=2,!e){n.next=25;break}rn("\u0417\u043c\u0456\u043d\u0438 \u0432 \u043a\u043e\u043d\u0444\u0456\u0433\u0443\u0440\u0430\u0446\u0456\u0457"),nn(!0),u={},n.t0=(0,kn.Z)().keys(s);case 8:if((n.t1=n.t0()).done){n.next=16;break}if(x=n.t1.value,s[x]===e[x]){n.next=14;break}if("pass"!==x||""!==A.trim()){n.next=13;break}return n.abrupt("continue",8);case 13:u[x]=s[x];case 14:n.next=8;break;case 16:return n.next=18,sn((0,Cn.Z)({id:e._id},u));case 18:h=n.sent,l===e._id&&o(null===(p=h.data)||void 0===p?void 0:p.data),b((0,st.k1)(a.map((function(n){var t;return n._id===e._id?null===(t=h.data)||void 0===t?void 0:t.data:n})))),i((function(n){return n.map((function(n){var t;return n._id===e._id?null===(t=h.data)||void 0===t?void 0:t.data:n}))})),(0,ae.X)(r("addtask.succ1")),n.next=37;break;case 25:return rn("\u041f\u043e\u0447\u0430\u0442\u043a\u043e\u0432\u0435 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0434\u0430\u043d\u0438\u0445"),nn(!0),n.next=29,ln(s);case 29:if(!(M=n.sent).data.hasOwnProperty("error")){n.next=33;break}return(0,ae.E)(r("addtask.err4")),n.abrupt("return");case 33:i((function(n){var t;return[].concat((0,wn.Z)(n),[null===(t=M.data)||void 0===t?void 0:t.data])})),(0,ae.X)(r("addtask.succ2")),"id"===l&&o(null===(v=M.data)||void 0===v?void 0:v.data),c("mailbox/".concat(null===(g=M.data)||void 0===g||null===(Z=g.data)||void 0===Z?void 0:Z._id,"?boxPath=").concat(null===(k=M.data)||void 0===k||null===(y=k.data)||void 0===y||null===(w=y.mailboxes[0])||void 0===w?void 0:w.path,"&page=1"),{state:{from:m}});case 37:t(),n.next=43;break;case 40:n.prev=40,n.t2=n.catch(2),(0,ae.E)(r("addtask.err3"));case 43:return n.prev=43,nn(!1),n.finish(43);case 46:case"end":return n.stop()}}),n,null,[[2,40,43,46]])})));return function(){return n.apply(this,arguments)}}();return(0,ut.jsxs)(ut.Fragment,{children:[(0,ut.jsxs)(Tt,{children:[(0,ut.jsx)(Xt,{children:(0,ut.jsx)(Ht,{children:"\u041d\u0430\u043b\u0430\u0448\u0442\u0443\u0432\u0430\u043d\u043d\u044f \u043f\u043e\u0448\u0442\u043e\u0432\u043e\u0457 \u0430\u0434\u0440\u0435\u0441\u0438"})}),(0,ut.jsxs)(Gt,{children:[(0,ut.jsx)(Dt,{htmlFor:"icon",children:"\u0406\u043a\u043e\u043d\u043a\u0430:"}),(0,ut.jsx)(ee,{options:un,color:d,selectedValue:f,onChange:v})]}),(0,ut.jsxs)(Gt,{children:[(0,ut.jsx)(Dt,{htmlFor:"color",children:"\u041a\u043e\u043b\u0456\u0440 \u043f\u0456\u043a\u0442\u043e\u0433\u0440\u0430\u043c\u0438:"}),(0,ut.jsx)(re,{color:d,onChange:x}),(0,ut.jsx)(Dt,{htmlFor:"useTls",children:"\u0412\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u043e\u0432\u0443\u0432\u0430\u0442\u0438 TLS:"}),(0,ut.jsx)(Kt,{type:"checkbox",id:"useTls",name:"useTls",checked:Y,onChange:function(n){return U(n.target.checked)}})]}),(0,ut.jsxs)(Gt,{children:[(0,ut.jsx)(Dt,{htmlFor:"username",children:"\u041f\u043e\u0448\u0442\u043e\u0432\u0430 \u0430\u0434\u0440\u0435\u0441\u0430:"}),(0,ut.jsx)(Rt,{type:"text",id:"username",name:"username",value:P,onChange:function(n){return N(n.target.value)}})]}),(0,ut.jsx)(Wt,{children:"\u041d\u0430\u043b\u0430\u0448\u0442\u0443\u0432\u0430\u043d\u043d\u044f IMAP"}),(0,ut.jsxs)(Gt,{children:[(0,ut.jsx)(Dt,{htmlFor:"host",children:"\u0425\u043e\u0441\u0442:"}),(0,ut.jsx)(Rt,{type:"text",id:"host",name:"host",value:j,onChange:function(n){return k(n.target.value)}})]}),(0,ut.jsxs)(Gt,{children:[(0,ut.jsx)(Dt,{htmlFor:"port",children:"\u041f\u043e\u0440\u0442:"}),(0,ut.jsx)(Rt,{type:"text",id:"port",name:"port",value:C,onChange:function(n){return M(n.target.value)}})]}),(0,ut.jsxs)(Gt,{children:[(0,ut.jsx)(Dt,{htmlFor:"pass",children:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043b\u044f \u0434\u043e\u0434\u0430\u0442\u043a\u0456\u0432:"}),(0,ut.jsx)(Rt,{type:"password",id:"pass",name:"pass",value:A,onChange:function(n){return z(n.target.value)}})]}),(0,ut.jsx)(Wt,{children:"\u041d\u0430\u043b\u0430\u0448\u0442\u0443\u0432\u0430\u043d\u043d\u044f SMPT"}),(0,ut.jsxs)(Gt,{children:[(0,ut.jsx)(Dt,{htmlFor:"smtpHost",children:"\u0425\u043e\u0441\u0442:"}),(0,ut.jsx)(Rt,{type:"text",id:"smtpHost",name:"smtpHost",value:D,onChange:function(n){return R(n.target.value)}})]}),(0,ut.jsxs)(Gt,{children:[(0,ut.jsx)(Dt,{htmlFor:"smtpPort",children:"\u041f\u043e\u0440\u0442"}),(0,ut.jsx)(Rt,{type:"text",id:"smtpPort",name:"smtpPort",value:$,onChange:function(n){return K(n.target.value)}})]}),(0,ut.jsxs)(Gt,{style:{justifyContent:"flex-end",gap:"15px"},children:[(0,ut.jsx)(Dt,{htmlFor:"useSls",children:"\u0412\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u043e\u0432\u0443\u0432\u0430\u0442\u0438 SSL:"}),(0,ut.jsx)(Kt,{type:"checkbox",id:"useSls",name:"useSls",checked:T,onChange:function(n){return H(n.target.checked)}})]}),(0,ut.jsxs)(Vt,{children:[(0,ut.jsx)($t,{onClick:t,children:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438"}),(0,ut.jsx)($t,{onClick:dn,children:e?"\u0417\u043c\u0456\u043d\u0438\u0442\u0438":"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})]})]}),J?(0,ut.jsxs)("div",{style:{top:"0",width:"100%",height:"100%",position:"absolute",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:20,background:"rgba(0, 0, 0, 0.5)"},children:[(0,ut.jsx)(ce.Z,{color:"#fff",loading:!0,css:le.KG,size:100}),(0,ut.jsx)("h4",{style:{backgroundColor:"rgba(256,256,256,0.5)"},children:on})]}):null]})},ue=function(n){var t=n.onClose,e=n.initialSettings,i=n.setMailBoxArray,o=n.accentBox,r=n.setAccentBox;return(0,ut.jsx)(At.Z,{onClose:t,children:(0,ut.jsx)(se,{onClose:t,initialSettings:e,setMailBoxArray:i,accentBox:o,setAccentBox:r})})},de=function(n){var t=n.mailBoxArray,e=n.setMailBoxArray,i=n.accentBox,o=n.setAccentBox,r=n.setColor,a=n.setCheckedMailArray,l=(0,xt.$G)().t,c=(0,ot.I0)(),s=(0,rt.Mf)(),u=(0,Mn.Z)(s,1)[0],d=[{value:"mailbox-icon-1",label:"Gmail",icon:(0,ut.jsx)(wt,{})},{value:"mailbox-icon-2",label:"Yahoo",icon:(0,ut.jsx)(yt,{})},{value:"mailbox-icon-3",label:"Outlook",icon:(0,ut.jsx)(Ct,{})},{value:"mailbox-icon-4",label:"Apple",icon:(0,ut.jsx)(Mt,{})},{value:"mailbox-icon-5",label:"Proton",icon:(0,ut.jsx)(_t,{})},{value:"mailbox-icon-6",label:"Zoho",icon:(0,ut.jsx)(St,{})},{value:"mailbox-icon-7",label:"Mail",icon:(0,ut.jsx)(Pt,{})}],x=(0,Sn.useState)(null===t||void 0===t?void 0:t.length),h=(0,Mn.Z)(x,1)[0],p=(0,Sn.useState)(5),f=(0,Mn.Z)(p,1)[0],v=(0,Sn.useState)(0),m=(0,Mn.Z)(v,2),b=m[0],g=m[1],Z=(0,et.s0)(),j=(0,et.TH)(),k=(0,Sn.useState)(null),y=(0,Mn.Z)(k,2),w=y[0],C=y[1],M=(0,Sn.useState)(!1),_=(0,Mn.Z)(M,2),S=_[0],P=_[1],N=h%f===0?h/f+1:Math.ceil(h/f),I=function(){var n=(0,yn.Z)((0,kn.Z)().mark((function n(r){var a,s;return(0,kn.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.length,u(r),(0,ae.X)(l("addtask.succ3")),s=t.filter((function(n){return n._id!==r})),e(s),1!==a){n.next=11;break}return o({}),c((0,st.eT)(null)),c((0,st.YY)(null)),Z("mailbox/id",{state:{from:j}}),n.abrupt("return");case 11:i._id===r&&(c((0,st.eT)(s[0]._id)),c((0,st.YY)(s[0].mailboxes[0].path)),o(s[0]),Z("mailbox/".concat(s[0]._id,"?boxPath=").concat(s[0].mailboxes[0].path,"&page=1"),{state:{from:j}}));case 12:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}();return(0,ut.jsx)(ut.Fragment,{children:(0,ut.jsxs)(ft,{children:[(0,ut.jsxs)(It,{onClick:function(){g(b-1)},style:{display:b>0?"block":"none"},children:["<"," "]}),(0,ut.jsxs)(vt,{children:[null===t||void 0===t?void 0:t.map((function(n,t){var e=d.findIndex((function(t){return t.value===n.iconBox}));return(0,ut.jsxs)(gt,{color:n.color,border:n.NumId===(null===i||void 0===i?void 0:i.NumId),children:[(0,ut.jsxs)(Zt,{onClick:function(){c((0,st.eT)(n._id)),c((0,st.YY)(n.mailboxes[0].path)),o(n),r(n.color),n._id!==i._id&&a([]),Z("mailbox/".concat(n._id,"?boxPath=").concat(n.mailboxes[0].path,"&page=1"),{state:{from:j}})},style:{display:t>=b*f&&t<(b+1)*f?"flex":"none"},children:[-1!==e?d[e].icon:null,(0,ut.jsx)(Nt,{children:n.email})]}),(0,ut.jsx)(mt,{className:"show",onClick:function(){return function(n){C(n),P(!0),document.body.style.overflow="hidden"}(n)}}),(0,ut.jsx)(bt,{className:"show",onClick:function(){return I(n._id)}})]},n.NumId)})),(0,ut.jsx)(gt,{children:(0,ut.jsx)(Zt,{style:{display:b>=N-1?"block":"none"},children:(0,ut.jsx)(jt,{onClick:function(){C(null),P(!0),document.body.style.overflow="hidden"},children:(0,ut.jsx)(kt,{})})})})]}),(0,ut.jsxs)(Et,{onClick:function(){g(b+1)},style:{display:b<N-1?"block":"none"},children:[">"," "]}),S&&(0,ut.jsx)(ue,{onClose:function(){P(!1),document.body.style.overflow="auto"},initialSettings:w,setMailBoxArray:e,accentBox:i,setAccentBox:o})]})})},xe=e(84217),he=function(){var n,t,e,i,o,r,a=(0,et.TH)(),l=(0,ot.v9)(xe.dy).itemPerPage,c=(0,ot.v9)(at.as),s=(0,rt.qf)(),u=(0,Mn.Z)(s,1)[0],d=(0,rt.AT)(),x=(0,Mn.Z)(d,1)[0],h=(0,rt.iL)(),p=(0,Mn.Z)(h,1)[0],f=(0,ot.v9)(at.pW),v=(0,ot.v9)(at.dY),m=(0,ot.v9)(at.Zp),b=(0,ot.I0)(),g=(0,rt.MH)().data,Z=(0,et.UO)(),j=Z._id,k=Z.uid,y=Z.uids,w=(0,it.lr)(),C=(0,Mn.Z)(w,1)[0],M=C.get("boxPath"),_=(0,Sn.useState)(1),S=(0,Mn.Z)(_,2),P=S[0],N=S[1],I=Number(C.get("page")),E=C.get("search"),A=(0,rt.rz)({_id:j,path:M,page:P},{skip:"id"===j||null===j||void 0===j||null==M||1!==I&&(I+8)%10!==0&&I%10!==0||!!E}),z=A.data,B=A.refetch,L=(0,it.lr)(),Y=(0,Mn.Z)(L,1)[0].get("boxPath")||"",U=(0,Sn.useState)(c),F=(0,Mn.Z)(U,2),O=F[0],T=F[1],H=(0,Sn.useState)(c.find((function(n){return n._id===f}))&&{}),G=(0,Mn.Z)(H,2),X=G[0],D=G[1],R=(0,Sn.useState)(null===(n=c.find((function(n){return n._id===f})))||void 0===n?void 0:n.color),V=(0,Mn.Z)(R,2),W=V[0],$=V[1],K=(0,Sn.useState)(null===c||void 0===c||null===(t=c.find((function(n){return n._id===f})))||void 0===t||null===(e=t.mailboxes)||void 0===e||null===(i=e.find((function(n){return n.path===v})))||void 0===i?void 0:i.mailList),Q=(0,Mn.Z)(K,2),q=Q[0],J=Q[1],nn=(0,Sn.useState)([]),tn=(0,Mn.Z)(nn,2),en=tn[0],on=tn[1],rn=(0,Sn.useState)(null),an=(0,Mn.Z)(rn,2),ln=an[0],cn=an[1],sn=(0,et.s0)();(0,Sn.useEffect)((function(){console.log("checkedMailArray :>> ",en),console.log("checkedMailArray.filter(elem => !elem.unseen).length :>> ",en.filter((function(n){return"false"===n.unseen})).length)}),[en]),(0,Sn.useEffect)((function(){1===I&&N(I),(I+8)%10===0&&N((I+8)/10+1)}),[I]),(0,Sn.useEffect)((function(){if(void 0!==g){var n=g.data.listImap;if(b((0,st.k1)(n)),T(n||[]),0===n.length)b((0,st.k1)([])),b((0,st.eT)(null)),b((0,st.YY)(null)),sn("mailbox/id",{state:{from:a}});else{var t,e;if(b((0,st.k1)(n)),T(n||[]),f&&-1!==n.findIndex((function(n){return n._id===f})))console.log("asdada3 :>> "),D(c.find((function(n){return n._id===f}))),$(c.find((function(n){return n._id===f})).color);else console.log("asdada2 :>> "),b((0,st.eT)(n[0]._id)),b((0,st.YY)(n[0].mailboxes[0].path)),D(n[0]),$(null===(e=n[0])||void 0===e?void 0:e.color);v||-1!==(null===(t=n.find((function(n){return n.id===f})))||void 0===t?void 0:t.mailboxes.findIndex((function(n){return n.path===v})))||b((0,st.YY)(n[0].mailboxes[0].path)),j&&sn("mailbox/".concat(f||n[0]._id,"?boxPath=").concat(v||n[0].mailboxes[0].path,"&page=").concat(m||1),{state:{from:a}}),j||k||y||sn("mailbox/".concat(f||n[0]._id,"?boxPath=").concat(v||n[0].mailboxes[0].path,"&page=").concat(m||1),{state:{from:a}})}}}),[g]),(0,Sn.useEffect)((function(){f&&m&&v&&(D(c.find((function(n){return n._id===f}))),$(c.find((function(n){return n._id===f})).color),sn("mailbox/".concat(f,"?boxPath=").concat(v,"&page=").concat(m),{state:{from:a}}))}),[]),(0,Sn.useEffect)((function(){if(z&&O){var n;B();var t=O.findIndex((function(n){return n._id===z._id})),e=null===X||void 0===X||null===(n=X.mailboxes)||void 0===n?void 0:n.findIndex((function(n){return n.path===z.path}));if(-1!==t&&-1!==e){var i=z.listEmail,o=O.map((function(n){return n._id===z._id?(0,Cn.Z)((0,Cn.Z)({},n),{},{mailboxes:n.mailboxes.map((function(n){if(n.path===z.path){var t=n.mailList,e=i.filter((function(n){return!t.some((function(t){return t.id===n.id}))})),o="1"===z.page?(0,wn.Z)(i).sort((function(n,t){return t.id-n.id})):[].concat((0,wn.Z)(t),(0,wn.Z)(e)).sort((function(n,t){return t.id-n.id}));return o.sort((function(n,t){return t.id-n.id})),(0,Cn.Z)((0,Cn.Z)({},n),{},{countMailUnseen:z.countMailUnseen,countMail:z.countMail,mailList:o})}return n}))}):n}));b((0,st.k1)(o)),T(o),X._id===z._id&&(D(o[t]),console.log("viiiii :>> "))}}}),[z]),(0,Sn.useEffect)((function(){var n,t;E||J(null===X||void 0===X||null===(n=X.mailboxes)||void 0===n||null===(t=n.find((function(n){return n.path===M})))||void 0===t?void 0:t.mailList)}),[X,M]),(0,Sn.useEffect)((function(){var n,t;E||(console.log("\u041f\u0440\u0438\u0439\u0448\u043b\u0430 \u0417\u0430\u043c\u0456\u043d\u0430:>> ",X),b((0,st.k1)(c.map((function(n){return n._id===X._id?X:n})))),T(c.map((function(n){return n._id===X._id?X:n}))),$(null===X||void 0===X?void 0:X.color),J(null===X||void 0===X||null===(n=X.mailboxes)||void 0===n||null===(t=n.find((function(n){return n.path===M})))||void 0===t?void 0:t.mailList))}),[X]);var un=function(){var n=(0,yn.Z)((0,kn.Z)().mark((function n(t,e,i){var o;return(0,kn.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=i?[i.id]:en.map((function(n){return n.id})),n.next=3,x({_id:j,fromPath:t,toPath:e,mailList:o});case 3:D((function(n){var r=n.mailboxes.findIndex((function(n){return n.path===t})),a=n.mailboxes.findIndex((function(n){return n.path===e})),l=(0,wn.Z)(n.mailboxes);return l[r]=(0,Cn.Z)((0,Cn.Z)({},l[r]),{},{mailList:l[r].mailList.filter((function(n){return!o.includes(n.id)})).map((function(n){return(0,Cn.Z)((0,Cn.Z)({},n),{},{id:n.id-o.filter((function(t){return t<n.id})).length})})),countMail:l[r].countMail-o.length,countMailUnseen:l[r].countMailUnseen-(i?!0===i.unseen?1:0:en.filter((function(n){return!0===n.unseen})).length)}),l[a]=(0,Cn.Z)((0,Cn.Z)({},l[a]),{},{mailList:[].concat((0,wn.Z)(l[a].mailList),(0,wn.Z)(i?[i]:en)).sort((function(n,t){return new Date(t.date)-new Date(n.date)})).map((function(n,t){return(0,Cn.Z)((0,Cn.Z)({},n),{},{id:l[a].countMail+o.length-t})})),countMail:l[a].countMail+o.length,countMailUnseen:l[a].countMailUnseen+(i?!0===i.unseen?1:0:en.filter((function(n){return!0===n.unseen})).length)}),on([]),(0,Cn.Z)((0,Cn.Z)({},n),{},{mailboxes:l})}));case 4:case"end":return n.stop()}}),n)})));return function(t,e,i){return n.apply(this,arguments)}}(),dn=function(){var n=(0,yn.Z)((0,kn.Z)().mark((function n(t,e){var i;return(0,kn.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(en.filter((function(n){return n.unseen===!t})).length!==en.length||!k){n.next=2;break}return n.abrupt("return");case 2:i=e?[e.id]:en.map((function(n){return n.id})),p({_id:j,path:M,mailList:i,seen:!t}),D((function(n){var o=n.mailboxes.findIndex((function(n){return n.path===M})),r=(0,wn.Z)(n.mailboxes);return r[o]=(0,Cn.Z)((0,Cn.Z)({},r[o]),{},{mailList:r[o].mailList.map((function(n){return i.includes(n.id)?(0,Cn.Z)((0,Cn.Z)({},n),{},{unseen:!t}):n})),countMailUnseen:t?r[o].countMailUnseen-(e?!0===e.unseen?1:0:en.filter((function(n){return!0===n.unseen})).length):r[o].countMailUnseen+(e?!1===e.unseen?1:0:en.filter((function(n){return!1===n.unseen})).length)}),on([]),(0,Cn.Z)((0,Cn.Z)({},n),{},{mailboxes:r})}));case 5:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),xn=function(){var n=(0,yn.Z)((0,kn.Z)().mark((function n(t,e){var i;return(0,kn.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e?[e.id]:en.map((function(n){return n.id})),n.next=3,u({_id:j,path:t,mailList:i});case 3:D((function(n){var o=n.mailboxes.findIndex((function(n){return n.path===t})),r=(0,wn.Z)(n.mailboxes);return r[o]=(0,Cn.Z)((0,Cn.Z)({},r[o]),{},{mailList:r[o].mailList.filter((function(n){return!i.includes(n.id)})).map((function(n){return(0,Cn.Z)((0,Cn.Z)({},n),{},{id:n.id-i.filter((function(t){return t<n.id})).length})})),countMail:r[o].countMail-i.length,countMailUnseen:r[o].countMailUnseen-(e?!0===e.unseen?1:0:en.filter((function(n){return!0===n.unseen})).length)}),on([]),(0,Cn.Z)((0,Cn.Z)({},n),{},{mailboxes:r})}));case 4:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}();return(0,ut.jsx)(ct.rj,{children:(0,ut.jsxs)(ct.dN,{children:[(0,ut.jsx)(de,{mailBoxArray:O,setMailBoxArray:T,accentBox:X,setAccentBox:D,setColor:$,setCheckedMailArray:on}),(0,ut.jsxs)(ct.E8,{children:[(0,ut.jsxs)(ct.Ec,{children:[(0,ut.jsx)(ct.Xz,{color:null===X||void 0===X?void 0:X.color,children:null===X||void 0===X?void 0:X.email}),(0,ut.jsxs)(ct.wg,{children:[null===X||void 0===X||null===(o=X.mailboxes)||void 0===o?void 0:o.map((function(n){var t=n._id,e=n.path,i=n.nameUa,o=n.countMailUnseen;return(0,ut.jsxs)(ct.QX,{color:W,active:e===Y,onClick:function(){b((0,st.YY)(e)),e!==Y&&on([]),sn("mailbox/".concat(null===X||void 0===X?void 0:X._id,"?boxPath=").concat(e,"&page=1"),{state:{from:a}})},children:[(0,ut.jsx)(ct.vv,{children:i}),(0,ut.jsx)(ct.$9,{children:0===o?"":o})]},t)})),(0,ut.jsx)(ct.QX,{ids:j,color:W,children:(0,ut.jsxs)(ct.c7,{to:"newmail/".concat(j||y,"?boxPath=").concat(M,"&page=1&resend=false&upsend=true"),state:{from:a},color:W,children:[" ","\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u0438",(0,ut.jsx)(ct.x2,{})]})})]})]}),(0,ut.jsxs)(ct._$,{children:[k||j?(0,ut.jsx)(dt,{box:null===X||void 0===X||null===(r=X.mailboxes)||void 0===r?void 0:r.find((function(n){return n.path===Y})),path:Y,itemPerPage:l,setMailArray:J,mailArray:q,setCheckedMailArray:on,checkedMailArray:en,setAccentBox:D,accentBox:X,handleMove:un,handleFlags:dn,handleDelete:xn}):null," ",(0,ut.jsx)(ct.Kz,{uids:(!y).toString(),ids:j,children:(0,ut.jsx)(Sn.Suspense,{fallback:(0,ut.jsx)(_n.Z,{}),children:(0,ut.jsx)(et.j3,{context:[q,X,function(n){sn(E?"mail/".concat(n,"?boxPath=").concat(M,"&page=").concat(Math.ceil((q.findIndex((function(t){return t.id===Number(n)}))+1)/50),"&search=").concat(E):"mail/".concat(n,"?boxPath=").concat(M,"&page=").concat(I),{state:{from:a}})},on,en,W,function(n,t){sn(n?"newmail/".concat(j,"?boxPath=").concat(M,"&page=").concat(I,"&upsend=true&uid=").concat(t):"newmail/".concat(null===X||void 0===X?void 0:X._id,"?boxPath=").concat(M,"&page=").concat(I,"&resend=true"),{state:{from:a}})},ln,cn,un,dn,xn]})})})]})]})]})})}}}]);
//# sourceMappingURL=620.8a0abc8d.chunk.js.map